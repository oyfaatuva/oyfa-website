import{r as g}from"./index-EkbmJ3ot.js";import{i as v}from"./errors-CfEjKOS7.js";function E(n,t,e){var o;if(typeof n=="string"){let r=document;t&&(v(!!t.current),r=t.current),e?((o=e[n])!==null&&o!==void 0||(e[n]=r.querySelectorAll(n)),n=e[n]):n=r.querySelectorAll(n)}else n instanceof Element&&(n=[n]);return Array.from(n||[])}const I={some:0,all:1};function p(n,t,{root:e,margin:o,amount:r="some"}={}){const u=E(n),s=new WeakMap,c=a=>{a.forEach(i=>{const l=s.get(i.target);if(i.isIntersecting!==!!l)if(i.isIntersecting){const d=t(i);typeof d=="function"?s.set(i.target,d):f.unobserve(i.target)}else l&&(l(i),s.delete(i.target))})},f=new IntersectionObserver(c,{root:e,rootMargin:o,threshold:typeof r=="number"?r:I[r]});return u.forEach(a=>f.observe(a)),()=>f.disconnect()}function h(n,{root:t,margin:e,amount:o,once:r=!1}={}){const[u,s]=g.useState(!1);return g.useEffect(()=>{if(!n.current||r&&u)return;const c=()=>(s(!0),r?void 0:()=>s(!1)),f={root:t&&t.current||void 0,margin:e,amount:o};return p(n.current,c,f)},[t,n,e,r,o]),u}export{h as u};
